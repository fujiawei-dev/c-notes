---
date: 2020-10-29T22:00:25+08:00  # 创建日期
author: "Rustle Karl"  # 作者

# 文章
title: "C/C++ 结构体"  # 文章标题
url:  "posts/cpp/tutorial/struct"  # 设置网页永久链接
tags: [ "cpp" ]  # 标签
series: [ "C/C++ 学习笔记"]  # 文章主题/文章系列
categories: [ "学习笔记"]  # 文章分类

# 章节
weight: 20 # 排序优先级
chapter: false  # 设置为章节

index: true  # 是否可以被索引
toc: true  # 是否自动生成目录
draft: false  # 草稿
---

## 概述

结构由数目固定的成员（又称域、项目或元素）构成，各成员可以具有不同的数据类型，包括基本类型和非基本类型。一个结构变量在内存占有一片连续的存储空间，但是，因为各数据成员的类型不相同，所以具有特定的定义和访问形式。

## 定义结构

结构类型是用户自定义数据类型，以关键字 struct 标识，由结构类型名、各成员的名称和类型定义。

定义结构类型的说明语句形式为：

```c++
struct 标识符 {
    类型 成员名;
}
```

其中，关键字 struct 之后的标识符是用户自定义的类型名，括号“{}”中为结构的成员列表。

封装在结构中的数据成员表示了组织数据的项目。

一个结构成员的类型可以是已定义的结构类型，即另一个已定义的结构体类型。

## 声明结构体类型变量

可以用两种方式说明结构变量：在定义类型的同时说明变量；或者，在类型定义之后说明变量。

```c++
struct Book {
    int code;
    double price;
} book, *pBook;
```

在结构定义之后，使用类型标识符说明变量：

```c++
struct Book {
    int code;
    double price;
};

Book book, *pBook;
```

语法原则是首先定义类型，然后说明变量。通常可以把类型定义放在一个头文件中，使用时用 include 指令嵌入。

说明结构变量的同时可以进行初始化，例如：

```c++
Book book = {1000, 36.5};
```

## 访问结构体

普通变量说明时就开辟内存空间，而结构类型中说明的数据成员仅仅描述了数据的组织形式，这就是“类型”的概念。当说明结构变量之后，系统为变量建立各自的存储空间。所以，把结构的数据成员看做普通变量是错误的。数据成员必须在结构变量说明后才有存储意义

访问结构变量成员使用圆点运算符：

```c++
int main() {
    Book book = {1000, 36.5};
    cout << book.code << endl;
    cout << book.price << endl;
}
```

访问结构指针变量：

```c++
int main() {
    Book book = {1000, 36.5};
    Book *pBook = &book;
    cout << pBook->code << endl;
    cout << (*pBook).price << endl;
}
```

pBook 是结构类型的指针，若执行 pBook++，则偏移量是一个结构的长度。而结构的各数据成员具有不同的类型，因此，要访问结构变量里的各成员不能用指针偏移方式而只能用“.”运算符。这与数组元素操作不同。

类型相同的结构变量可以使用赋值运算。所谓“类型相同的变量”，是指用同一个类型标识符说明的变量。

## 结构数组

数组元素类型可以是基本类型，也可以是已经定义的构造类型。当数组的元素类型为结构类型时，称为结构数组。其定义和访问方式遵循数组和结构的语法规则。
